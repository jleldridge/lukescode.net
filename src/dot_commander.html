<!DOCTYPE HTML>
<html>
    <head>
        <meta charset="utf-8" />
        <title>Lukescode.net</title>
        <script 
        src ="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js">
        </script>
    </head>
    <body style="overflow: hidden; padding:0px; border:0px; margin:0px;">
        <canvas id="main" width="800" height="600" 
        style="background-color:black; padding:0px; border:0px; margin:0px;">   
        </canvas>
        <script type="text/javascript">
            $(function(){
            });

            var canvas = document.getElementById('main');
            canvas.addEventListener("mousedown", on_mouse_down, false);
            canvas.addEventListener("mouseup", on_mouse_up, false);
            canvas.addEventListener("mousemove", on_mouse_move, false);
            canvas.width = $(window).width();
            canvas.height = $(window).height();
            var graphics = canvas.getContext('2d');
            var select_rect = new Object();

            function on_mouse_down(event){
                var x = event.clientX + document.body.scrollLeft +
                    document.documentElement.scrollLeft;
                var y = event.clientY + document.body.scrollTop +
                    document.documentElement.scrollTop;
                x -= canvas.offsetLeft;
                y -= canvas.offsetTop;
                window.mouse_down = true;
                window.mouse_down_x = x;
                window.mouse_down_y = y;
            }

            function on_mouse_up(event){
                var x = event.clientX + document.body.scrollLeft +
                    document.documentElement.scrollLeft;
                var y = event.clientY + document.body.scrollTop +
                    document.documentElement.scrollTop;
                x -= canvas.offsetLeft;
                y -= canvas.offsetTop;
                window.mouse_down = false;
            }

            function on_mouse_move(event){
                var x = event.clientX + document.body.scrollLeft +
                    document.documentElement.scrollLeft;
                var y = event.clientY + document.body.scrollTop +
                    document.documentElement.scrollTop;
                x -= canvas.offsetLeft;
                y -= canvas.offsetTop;

                window.curr_mouse_x = x;
                window.curr_mouse_y = y;
            }

            function main_loop(){
                update();
                render();
            }

            function update(){
                //draw square from mouse_down position to current mouse position
                
                if (window.mouse_down){
                    window.select_rect.x = window.mouse_down_x;
                    window.select_rect.y = window.mouse_down_y;
                    window.select_rect.width = 
                        window.curr_mouse_x-window.select_rect.x;
                    window.select_rect.height = 
                        window.curr_mouse_y-window.select_rect.y;
                }
            }

            function render(){
                graphics.fillStyle = "#000000";
                graphics.fillRect(0, 0, canvas.width, canvas.height);

                graphics.strokeStyle = "#FFFFFF";
                graphics.strokeRect(window.select_rect.x, window.select_rect.y,
                    window.select_rect.width, window.select_rect.height);
            }

            setInterval(main_loop, 1000/25);
        </script>
    </body>
</html>